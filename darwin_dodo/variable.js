var gdjs;!function(t){t.Variable=class{constructor(e){this._type="number",this._value=0,this._str="0",this._bool=!1,this._children={},this._childrenArray=[],this._undefinedInContainer=!1,this.concatenate=t.Variable.prototype.concatenateString,this.reinitialize(e)}reinitialize(e){if(this._type="number",this._value=0,this._str="0",this._bool=!1,this._children={},this._childrenArray=[],this._undefinedInContainer=!1,void 0!==e)if(this._type=e.type||"number","number"===this._type)this._value=parseFloat(e.value||"0"),this._value!=this._value&&(this._value=0);else if("string"===this._type)this._str=""+e.value||"0";else if("boolean"===this._type)this._bool=!!e.value;else if("structure"===this._type){if(void 0!==e.children)for(var i=0,r=e.children.length;i<r;++i){var s=e.children[i];void 0!==s.name&&(this._children[s.name]=new t.Variable(s))}}else if("array"===this._type&&e.children)for(const i of e.children)this._childrenArray.push(new t.Variable(i))}static isPrimitive(t){return"string"===t||"number"===t||"boolean"===t}static copy(t,e,i){if(i||e.clearChildren(),e.castTo(t.getType()),t.isPrimitive())e.setValue(t.getValue());else if("structure"===t.getType()){const i=t.getAllChildren();for(const t in i)i.hasOwnProperty(t)&&e.addChild(t,i[t].clone())}else if("array"===t.getType())for(const i of t.getAllChildrenArray())e.pushVariableCopy(i);return e}isPrimitive(){return t.Variable.isPrimitive(this._type)}clone(){return t.Variable.copy(this,new t.Variable)}setUndefinedInContainer(){this._undefinedInContainer=!0}isUndefinedInContainer(){return this._undefinedInContainer}castTo(t){if("string"===t)this.setString(this.getAsString());else if("number"===t)this.setNumber(this.getAsNumber());else if("boolean"===t)this.setBoolean(this.getAsBoolean());else if("structure"===t){if("structure"===this._type)return;this._children=this.getAllChildren(),this._type="structure"}else if("array"===t){if("array"===this._type)return;this._childrenArray=this.getAllChildrenArray(),this._type="array"}}getChild(e){return this.isPrimitive()&&this.castTo("structure"),"array"===this._type?this.getChildAt(parseInt(e,10)||0):(void 0!==this._children[e]&&null!==this._children[e]||(this._children[e]=new t.Variable),this._children[e])}addChild(t,e){return this.castTo("structure"),this._children[t]=e,this}hasChild(t){return"structure"===this._type&&this._children.hasOwnProperty(t)}removeChild(t){"structure"===this._type&&delete this._children[t]}clearChildren(){this._children={},this._childrenArray=[]}replaceChildren(t){this._type="structure",this._children=t}replaceChildrenArray(t){this._type="array",this._childrenArray=t}getAsNumber(){if("number"!==this._type){let t=0;return"string"===this._type?t=parseFloat(this._str):"boolean"===this._type&&(t=this._bool?1:0),t==t?t:0}return this._value}setNumber(t){this._type="number",t=parseFloat(t),this._value=t==t?t:0}getAsString(){return"string"!==this._type?"number"===this._type?this._value.toString():"boolean"===this._type?this._bool?"true":"false":"structure"===this._type?"[Structure]":"array"===this._type?"[Array]":"":this._str}setString(t){this._type="string",this._str=""+t}getAsBoolean(){return"boolean"!==this._type?"number"===this._type?0!==this._value:"string"!==this._type||"0"!==this._str&&""!==this._str&&"false"!==this._str:this._bool}setBoolean(t){this._type="boolean",this._bool=!!t}setValue(t){"string"===this._type?this.setString(t):"number"===this._type?this.setNumber(t):"boolean"===this._type&&this.setBoolean(t)}getValue(){return"number"===this._type?this.getAsNumber():"boolean"===this._type?this.getAsBoolean():this.getAsString()}isStructure(){return"structure"===this._type}isNumber(){return"number"===this._type}getType(){return this._type}getAllChildren(){return"structure"===this._type?this._children:"array"===this._type?Object.assign({},this._childrenArray):{}}getAllChildrenArray(){return"structure"===this._type?Object.values(this._children):"array"===this._type?this._childrenArray:[]}getChildrenCount(){return this.isPrimitive()?0:this.getAllChildrenArray().length}add(t){this.setNumber(this.getAsNumber()+t)}sub(t){this.setNumber(this.getAsNumber()-t)}mul(t){this.setNumber(this.getAsNumber()*t)}div(t){this.setNumber(this.getAsNumber()/t)}concatenateString(t){this.setString(this.getAsString()+t)}getChildAt(e){return this.castTo("array"),void 0!==this._childrenArray[e]&&null!==this._childrenArray[e]||(this._childrenArray[e]=new t.Variable),this._childrenArray[e]}removeAtIndex(t){"array"===this._type&&this._childrenArray.splice(t,1)}pushVariableCopy(t){this.castTo("array"),this._childrenArray.push(t.clone())}pushValue(e){this.castTo("array"),this._childrenArray.push(new t.Variable({type:typeof e,value:e}))}}}(gdjs||(gdjs={}));